<!DOCTYPE html>
<html lang="es">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <title>Acceso | IT Essentials</title>
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1">
Â  Â  <style>
Â  Â  Â  Â  html, body { height: 100%; }
Â  Â  Â  Â  body { margin: 0; font-family: Arial, sans-serif; min-height: 100vh; background: linear-gradient(135deg, #e0e7ef 0%, #f8fafc 100%);}
Â  Â  Â  Â  .sidebar { width: 0; min-height: 100vh; position: fixed; left: 0; top: 0; z-index: 200; pointer-events: none;}
Â  Â  Â  Â  .menu-icon { margin-top: 22px; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 2px; z-index: 201; position: fixed; left: 16px; top: 22px; pointer-events: auto;}
Â  Â  Â  Â  .bar { width: 28px; height: 4px; background: #fff; border-radius: 2px; transition: background 0.2s;}
Â  Â  Â  Â  .menu-icon:hover .bar { background: #ffcc00;}
Â  Â  Â  Â  .menu-list { position: fixed; left: 0; top: 0; height: 100vh; width: 220px; background: linear-gradient(135deg, #002147 85%, #003366 100%); box-shadow: 2px 0 16px rgba(0,0,0,0.18); display: flex; flex-direction: column; align-items: flex-start; padding-top: 80px; padding-bottom: 20px; gap: 8px; border-top-right-radius: 18px; border-bottom-right-radius: 18px; transform: translateX(-100%); transition: transform 0.3s cubic-bezier(.77,0,.18,1); z-index: 300; pointer-events: none;}
Â  Â  Â  Â  .menu-list.show { transform: translateX(0); pointer-events: auto;}
Â  Â  Â  Â  .menu-list a { background: none; border: none; color: #fff; padding: 12px 32px 12px 24px; text-align: left; width: 100%; font-size: 1.1em; cursor: pointer; border-radius: 8px; display: flex; align-items: center; gap: 10px; text-decoration: none; transition: background 0.2s, color 0.2s, transform 0.15s;}
Â  Â  Â  Â  .menu-list a:hover { background: #ffcc00; color: #002147; transform: translateX(6px) scale(1.04);}
Â  Â  Â  Â  .menu-list .icon { font-size: 1.2em; margin-right: 6px;}
Â  Â  Â  Â  .main-content { width: 100%; min-height: 100vh; }
Â  Â  Â  Â  header { background: #002147; color: white; padding: 20px 0 20px 0; display: flex; align-items: center; justify-content: center; gap: 16px; position: relative; z-index: 5; width: 100vw; left: 0;}
Â  Â  Â  Â  header img { height: 60px;}
Â  Â  Â  Â  header span { font-size: 2em; font-weight: bold; letter-spacing: 2px;}
Â  Â  Â  Â  .user-circle { /* Eliminado .user-photo */
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  right: 32px;
Â  Â  Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  Â  Â  transform: translateY(-50%);
Â  Â  Â  Â  Â  Â  width: 44px;
Â  Â  Â  Â  Â  Â  height: 44px;
Â  Â  Â  Â  Â  Â  background: #ffcc00;
Â  Â  Â  Â  Â  Â  color: #002147;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  font-size: 1.3em;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 8px rgba(0,0,0,0.10);
Â  Â  Â  Â  Â  Â  border: 2px solid #fff;
Â  Â  Â  Â  Â  Â  z-index: 10;
Â  Â  Â  Â  Â  Â  letter-spacing: 1px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  }
Â  Â  Â  Â  .user-circle:hover { background: #ffe066; } /* Eliminado .user-photo:hover */
Â  Â  Â  Â  /* Eliminado .user-photo { background: #fff; } */
Â  Â  Â  Â  .acceso-container { margin: 80px auto 0 auto; max-width: 340px; background: #fff; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.10); padding: 32px 24px; text-align: center;}
Â  Â  Â  Â  .acceso-container h2 { color: #002147; margin-bottom: 18px;}
Â  Â  Â  Â  .acceso-container input[type="text"], .acceso-container input[type="password"], .acceso-container input[type="email"] { width: 90%; padding: 10px; margin: 8px 0; border-radius: 6px; border: 1px solid #bbb; font-size: 1em;}
Â  Â  Â  Â  .acceso-container button { background: #002147; color: #fff; border: none; padding: 10px 32px; border-radius: 8px; font-size: 1.1em; cursor: pointer; margin-top: 12px;}
Â  Â  Â  Â  .acceso-container button:hover { background: #ffcc00; color: #002147;}
Â  Â  Â  Â  .acceso-error { color: #c00; margin-top: 10px; font-size: 1em;}
Â  Â  Â  Â  .acceso-success { color: #080; margin-top: 10px; font-size: 1em;}
Â  Â  Â  Â  .acceso-switch { margin-top: 18px; color: #002147; cursor: pointer; text-decoration: underline; background: none; border: none; font-size: 1em;}
Â  Â  Â  Â  .acceso-guest-btn {
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  Â  Â  background: none;
Â  Â  Â  Â  Â  Â  border: 1px solid #002147;
Â  Â  Â  Â  Â  Â  color: #002147;
Â  Â  Â  Â  Â  Â  padding: 8px 24px;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  font-size: 0.95em;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: background 0.2s, color 0.2s, border-color 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .acceso-guest-btn:hover {
Â  Â  Â  Â  Â  Â  background: #e6e6e6;
Â  Â  Â  Â  Â  Â  color: #001030;
Â  Â  Â  Â  Â  Â  border-color: #001030;
Â  Â  Â  Â  }

Â  Â  Â  Â  .inicio-content { margin: 40px auto 0 auto; max-width: 600px; background: #fff; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.10); padding: 32px 24px; text-align: center;}
Â  Â  Â  Â  .inicio-content h2 { color: #002147; margin: 0 0 16px 0; font-size: 2em; font-weight: bold; letter-spacing: 1px;}
Â  Â  Â  Â  .inicio-content p { color: #222; font-size: 1.1em;}
Â  Â  Â  Â  /* Modal perfil */
Â  Â  Â  Â  .modal-bg {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  z-index: 9999;
Â  Â  Â  Â  Â  Â  left: 0; top: 0; width: 100vw; height: 100vh;
Â  Â  Â  Â  Â  Â  background: rgba(0,0,0,0.25);
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  .modal-bg.show { display: flex; }
Â  Â  Â  Â  .modal-perfil {
Â  Â  Â  Â  Â  Â  background: #fff;
Â  Â  Â  Â  Â  Â  border-radius: 16px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 8px 32px rgba(0,0,0,0.18);
Â  Â  Â  Â  Â  Â  padding: 32px 32px 24px 32px;
Â  Â  Â  Â  Â  Â  min-width: 260px;
Â  Â  Â  Â  Â  Â  max-width: 90vw;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  }
Â  Â  Â  Â  .modal-perfil .user-circle { /* Eliminado .user-photo */
Â  Â  Â  Â  Â  Â  position: static;
Â  Â  Â  Â  Â  Â  margin: 0 auto 12px auto;
Â  Â  Â  Â  Â  Â  width: 60px; height: 60px; font-size: 2em;
Â  Â  Â  Â  Â  Â  border: 3px solid #002147;
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Eliminado .modal-perfil .user-photo { background: #fff; } */
Â  Â  Â  Â  .modal-perfil h3 { margin: 0 0 8px 0; color: #002147;}
Â  Â  Â  Â  .modal-perfil p { color: #222; margin: 0 0 8px 0;}
Â  Â  Â  Â  .close-modal {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 10px; right: 16px;
Â  Â  Â  Â  Â  Â  background: none; border: none; font-size: 1.5em; color: #888; cursor: pointer;
Â  Â  Â  Â  }
Â  Â  Â  Â  .close-modal:hover { color: #002147; }
Â  Â  Â  Â  /* BotÃ³n cerrar sesiÃ³n */
Â  Â  Â  Â  .btn-cerrar-sesion {
Â  Â  Â  Â  Â  Â  background: #002147;
Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  padding: 10px 32px;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  font-size: 1.1em;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  margin-top: 12px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 8px rgba(0,0,0,0.10);
Â  Â  Â  Â  Â  Â  transition: background 0.2s, color 0.2s, transform 0.15s;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  letter-spacing: 1px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-cerrar-sesion:hover {
Â  Â  Â  Â  Â  Â  background: #ffcc00;
Â  Â  Â  Â  Â  Â  color: #002147;
Â  Â  Â  Â  Â  Â  transform: scale(1.04);
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Eliminado .inputfile y .inputfile + label */
Â  Â  Â  Â  
Â  Â  Â  Â  /* Mensaje Bienvenida pantalla completa con animaciÃ³n de derecha a izquierda */
Â  Â  Â  Â  .bienvenido-full {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0; left: 0; width: 100vw; height: 100vh;
Â  Â  Â  Â  Â  Â  background: #fff;
Â  Â  Â  Â  Â  Â  color: #002147;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  font-size: 3em;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  letter-spacing: 2px;
Â  Â  Â  Â  Â  Â  z-index: 99999;
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  }
Â  Â  Â  Â  .bienvenido-full.show {
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  Â  Â  pointer-events: auto;
Â  Â  Â  Â  Â  Â  animation: fadeInBg 0.5s cubic-bezier(.77,0,.18,1);
Â  Â  Â  Â  }
Â  Â  Â  Â  .bienvenido-full .bienvenido-text {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  transform: translateX(100vw);
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  animation: slideInRight 1s cubic-bezier(.77,0,.18,1) forwards;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes slideInRight {
Â  Â  Â  Â  Â  Â  0% { transform: translateX(100vw); opacity: 0;}
Â  Â  Â  Â  Â  Â  60% { opacity: 1;}
Â  Â  Â  Â  Â  Â  100% { transform: translateX(0); opacity: 1;}
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes fadeInBg {
Â  Â  Â  Â  Â  Â  0% { opacity: 0;}
Â  Â  Â  Â  Â  Â  100% { opacity: 1;}
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Tabla usuarios admin */
Â  Â  Â  Â  .usuarios-content {
Â  Â  Â  Â  Â  Â  margin: 40px auto 0 auto;
Â  Â  Â  Â  Â  Â  max-width: 700px;
Â  Â  Â  Â  Â  Â  background: #fff;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 16px rgba(0,0,0,0.10);
Â  Â  Â  Â  Â  Â  padding: 32px 24px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  .usuarios-content h2 {
Â  Â  Â  Â  Â  Â  color: #002147;
Â  Â  Â  Â  Â  Â  margin-bottom: 18px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .usuarios-content table {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  border-collapse: collapse;
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .usuarios-content th, .usuarios-content td {
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  padding: 6px;
Â  Â  Â  Â  Â  Â  font-size: 1em;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  }
Â  Â  Â  Â  .usuarios-content th {
Â  Â  Â  Â  Â  Â  background: #f4f6fa;
Â  Â  Â  Â  Â  Â  color: #002147;
Â  Â  Â  Â  }
Â  Â  Â  Â  .usuarios-content tr:last-child td {
Â  Â  Â  Â  Â  Â  border-bottom: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Estilo para el botÃ³n de eliminar usuario */
Â  Â  Â  Â  .delete-user-btn {
Â  Â  Â  Â  Â  Â  background: #e74c3c;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  padding: 4px 8px;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  font-size: 0.85em;
Â  Â  Â  Â  Â  Â  transition: background 0.2s ease;
Â  Â  Â  Â  Â  Â  margin-left: 5px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .delete-user-btn:hover {
Â  Â  Â  Â  Â  Â  background: #c0392b;
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Eliminado estilos para avatares en la tabla de usuarios (.user-table-photo, .user-table-initials) */

Â  Â  Â  Â  @media (max-width: 600px) {
Â  Â  Â  Â  Â  Â  header { flex-direction: column; gap: 8px; padding: 16px 0;}
Â  Â  Â  Â  Â  Â  header img { height: 40px;}
Â  Â  Â  Â  Â  Â  header span { font-size: 1.2em;}
Â  Â  Â  Â  Â  Â  .acceso-container, .inicio-content, .usuarios-content { max-width: 98vw; padding: 16px 2vw;}
Â  Â  Â  Â  Â  Â  .user-circle { right: 12px; width: 36px; height: 36px; font-size: 1em;} /* Eliminado .user-photo */
Â  Â  Â  Â  Â  Â  .modal-perfil .user-circle { width: 44px; height: 44px; font-size: 1.2em;} /* Eliminado .user-photo */
Â  Â  Â  Â  Â  Â  .menu-list { width: 80vw; min-width: 140px;}
Â  Â  Â  Â  Â  Â  .bienvenido-full { font-size: 1.5em; padding: 0 10px;}
Â  Â  Â  Â  Â  Â  /* Ajustes para la tabla en mÃ³viles */
Â  Â  Â  Â  Â  Â  .usuarios-content th, .usuarios-content td {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 0.85em;
Â  Â  Â  Â  Â  Â  Â  Â  padding: 4px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .usuarios-content table {
Â  Â  Â  Â  Â  Â  Â  Â  overflow-x: auto;
Â  Â  Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="sidebar" id="sidebar-section" style="display:none;">
Â  Â  Â  Â  <div class="menu-icon" onclick="toggleMenu()">
Â  Â  Â  Â  Â  Â  <div class="bar"></div>
Â  Â  Â  Â  Â  Â  <div class="bar"></div>
Â  Â  Â  Â  Â  Â  <div class="bar"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <nav id="menu-list" class="menu-list">
Â  Â  Â  Â  Â  Â  <a href="/index.html"><span class="icon">ğŸ </span>Inicio</a>
Â  Â  Â  Â  Â  Â  <a href="/curso1.html"><span class="icon">ğŸ“˜</span>Curso 1</a>
Â  Â  Â  Â  Â  Â  <a href="/curso2.html"><span class="icon">ğŸ“—</span>Curso 2</a>
Â  Â  Â  Â  Â  Â  <a href="/curso3.html"><span class="icon">ğŸ“™</span>Curso 3</a>
Â  Â  Â  Â  Â  Â  <a href="/curso4.html"><span class="icon">ğŸ“•</span>Curso 4</a>
Â  Â  Â  Â  Â  Â  <a href="/curso5.html"><span class="icon">ğŸ’»</span>Curso 5</a>
Â  Â  Â  Â  Â  Â  <a href="/curso6.html"><span class="icon">ğŸ–¥ï¸</span>Curso 6</a>
Â  Â  Â  Â  Â  Â  <a href="/curso7.html"><span class="icon">ğŸ“</span>Curso 7</a>
Â  Â  Â  Â  Â  Â  <a href="/curso8.html"><span class="icon">ğŸ”§</span>Curso 8</a>
Â  Â  Â  Â  Â  Â  <a href="/curso9.html"><span class="icon">ğŸ”Œ</span>Curso 9</a>
Â  Â  Â  Â  Â  Â  <a href="/curso10.html"><span class="icon">ğŸ”’</span>Curso 10</a>
Â  Â  Â  Â  Â  Â  <a href="#" id="admin-dashboard-link" style="display:none;"><span class="icon">âš™ï¸</span>AdministraciÃ³n</a>
Â  Â  Â  Â  </nav>
Â  Â  </div>
Â  Â  <div class="main-content">
Â  Â  Â  Â  <header>
Â  Â  Â  Â  Â  Â  <img src="/img/kinal-logo-2.png" alt="Logo Kinal">
Â  Â  Â  Â  Â  Â  <span>FUNDACION KINAL</span>
Â  Â  Â  Â  Â  Â  <div id="user-avatar-container"></div>
Â  Â  Â  Â  </header>
Â  Â  Â  Â  <div id="bienvenido-full" class="bienvenido-full"></div>
Â  Â  Â  Â  <div class="modal-bg" id="perfil-modal-bg">
Â  Â  Â  Â  Â  Â  <div class="modal-perfil">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="close-modal" onclick="closePerfilModal()">&times;</button>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="perfil-avatar-container"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <h3>Mi Perfil</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <p id="perfil-nombre"></p>
Â  Â  Â  Â  Â  Â  Â  Â  <p id="perfil-apellido"></p>
Â  Â  Â  Â  Â  Â  Â  Â  <p id="perfil-usuario"></p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-cerrar-sesion" onclick="logout()" style="margin-top:10px;">Cerrar sesiÃ³n</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <section class="acceso-container" id="acceso-section">
Â  Â  Â  Â  Â  Â  <form id="login-form" autocomplete="off">
Â  Â  Â  Â  Â  Â  Â  Â  <h2>Iniciar SesiÃ³n</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" name="email" placeholder="Email" required><br>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" name="clave" placeholder="ContraseÃ±a" required><br>
Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit">Entrar</button>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="acceso-error" id="login-error"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="acceso-switch" id="show-register">Â¿No tienes cuenta? RegÃ­strate</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="acceso-guest-btn" id="guest-login-btn">Seguir sin cuenta</button>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  <form id="register-form" autocomplete="off" style="display:none;">
Â  Â  Â  Â  Â  Â  Â  Â  <h2>Registrarse</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="nombre" placeholder="Nombre" required><br>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="apellido" placeholder="Apellido" required><br>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" name="email" placeholder="Email" required><br>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" name="clave" placeholder="ContraseÃ±a" required><br>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" name="clave2" placeholder="Repetir ContraseÃ±a" required><br>
Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit">Registrarse</button>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="acceso-error" id="register-error"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="acceso-success" id="register-success"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="acceso-switch" id="show-login">Â¿Ya tienes cuenta? Inicia sesiÃ³n</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="acceso-guest-btn" id="guest-login-btn-register">Seguir sin cuenta</button>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  </section>
Â  Â  Â  Â  <section class="inicio-content" id="main-section" style="display:none;">
Â  Â  Â  Â  Â  Â  <h2>Bienvenido a IT Essentials</h2>
Â  Â  Â  Â  Â  Â  <p>
Â  Â  Â  Â  Â  Â  Â  Â  Selecciona un curso en el menÃº lateral para comenzar.<br>
Â  Â  Â  Â  Â  Â  Â  Â  AquÃ­ puedes colocar una breve descripciÃ³n de la plataforma o instrucciones generales.
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  <button class="btn-cerrar-sesion" onclick="logout()" style="margin-top:20px;">Cerrar sesiÃ³n</button>
Â  Â  Â  Â  </section>
Â  Â  Â  Â  <section class="usuarios-content" id="usuarios-section" style="display:none;">
Â  Â  Â  Â  Â  Â  <h2>Usuarios registrados</h2>
Â  Â  Â  Â  Â  Â  <table id="usuarios-table">
Â  Â  Â  Â  Â  Â  Â  Â  <thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>ID</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Email</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Nombre</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Apellido</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Rol</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Acciones</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  Â  Â  </thead>
Â  Â  Â  Â  Â  Â  Â  Â  <tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  </section>
Â  Â  </div>
Â  Â  <script>
Â  Â  Â  Â  // --- MenÃº lateral ---
Â  Â  Â  Â  function toggleMenu() {
Â  Â  Â  Â  Â  Â  const menu = document.getElementById('menu-list');
Â  Â  Â  Â  Â  Â  menu.classList.toggle('show');
Â  Â  Â  Â  }
Â  Â  Â  Â  document.addEventListener('click', function(e) {
Â  Â  Â  Â  Â  Â  const menu = document.getElementById('menu-list');
Â  Â  Â  Â  Â  Â  const icon = document.querySelector('.menu-icon');
Â  Â  Â  Â  Â  Â  if (e.target.closest('.menu-list a')) return;
Â  Â  Â  Â  Â  Â  if (!menu.contains(e.target) && !icon.contains(e.target)) {
Â  Â  Â  Â  Â  Â  Â  Â  menu.classList.remove('show');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', function() {
Â  Â  Â  Â  Â  Â  const menu = document.getElementById('menu-list');
Â  Â  Â  Â  Â  Â  const links = menu.querySelectorAll('a');
Â  Â  Â  Â  Â  Â  function updateLinks() {
Â  Â  Â  Â  Â  Â  Â  Â  if (menu.classList.contains('show')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  links.forEach(a => a.tabIndex = 0);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  links.forEach(a => a.tabIndex = -1);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  updateLinks();
Â  Â  Â  Â  Â  Â  const observer = new MutationObserver(updateLinks);
Â  Â  Â  Â  Â  Â  observer.observe(menu, { attributes: true, attributeFilter: ['class'] });
Â  Â  Â  Â  });

Â  Â  Â  Â  // Utilidades
Â  Â  Â  Â  function getInitials(nombre, apellido) {
Â  Â  Â  Â  Â  Â  if (!nombre && !apellido) return "?";
Â  Â  Â  Â  Â  Â  let initials = "";
Â  Â  Â  Â  Â  Â  if (nombre) initials += nombre[0];
Â  Â  Â  Â  Â  Â  if (apellido) initials += apellido[0];
Â  Â  Â  Â  Â  Â  return initials.toUpperCase();
Â  Â  Â  Â  }

Â  Â  Â  Â  // FunciÃ³n renderAvatar mejorada para reutilizaciÃ³n (simplificada sin 'foto')
Â  Â  Â  Â  function renderAvatar(containerElement, nombre, apellido, size, className, clickHandler = null) {
Â  Â  Â  Â  Â  Â  if (!containerElement) {
Â  Â  Â  Â  Â  Â  Â  Â  console.warn(`Contenedor '${containerElement}' no encontrado.`);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  containerElement.innerHTML = '';
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  let element = document.createElement('div');
Â  Â  Â  Â  Â  Â  element.className = className + ' user-circle'; // Siempre user-circle
Â  Â  Â  Â  Â  Â  element.textContent = getInitials(nombre, apellido);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  element.style.width = element.style.height = size + 'px';
Â  Â  Â  Â  Â  Â  if (clickHandler) element.onclick = clickHandler;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  containerElement.appendChild(element);
Â  Â  Â  Â  }

Â  Â  Â  Â  // ModificaciÃ³n de showUserAvatar para usar la nueva renderAvatar (sin 'foto')
Â  Â  Â  Â  function showUserAvatar() {
Â  Â  Â  Â  Â  Â  const nombre = localStorage.getItem('nombre_actual') || '';
Â  Â  Â  Â  Â  Â  const apellido = localStorage.getItem('apellido_actual') || '';
Â  Â  Â  Â  Â  Â  const userAvatarContainer = document.getElementById('user-avatar-container');

Â  Â  Â  Â  Â  Â  if (localStorage.getItem('correo_actual') !== 'invitado@temp.com') {
Â  Â  Â  Â  Â  Â  Â  Â  renderAvatar(userAvatarContainer, nombre, apellido, window.innerWidth < 600 ? 36 : 44, 'user-circle-header', showPerfilModal);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  if (userAvatarContainer) userAvatarContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function showPerfilModal() {
Â  Â  Â  Â  Â  Â  if (localStorage.getItem('correo_actual') === 'invitado@temp.com') {
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const correo = localStorage.getItem('correo_actual') || '';
Â  Â  Â  Â  Â  Â  const nombre = localStorage.getItem('nombre_actual') || '';
Â  Â  Â  Â  Â  Â  const apellido = localStorage.getItem('apellido_actual') || '';
Â  Â  Â  Â  Â  Â  const perfilAvatarContainer = document.getElementById('perfil-avatar-container');

Â  Â  Â  Â  Â  Â  renderAvatar(perfilAvatarContainer, nombre, apellido, window.innerWidth < 600 ? 44 : 60, 'user-circle-modal');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  document.getElementById('perfil-nombre').textContent = "Nombre: " + (nombre || 'N/A');
Â  Â  Â  Â  Â  Â  document.getElementById('perfil-apellido').textContent = "Apellido: " + (apellido || 'N/A');
Â  Â  Â  Â  Â  Â  document.getElementById('perfil-usuario').textContent = "Correo: " + correo;
Â  Â  Â  Â  Â  Â  document.getElementById('perfil-modal-bg').classList.add('show');
Â  Â  Â  Â  }
Â  Â  Â  Â  function closePerfilModal() {
Â  Â  Â  Â  Â  Â  const modal = document.getElementById('perfil-modal-bg');
Â  Â  Â  Â  Â  Â  if (modal) modal.classList.remove('show');
Â  Â  Â  Â  }

Â  Â  Â  Â  function mostrarBienvenida(nombre) {
Â  Â  Â  Â  Â  Â  const msg = document.getElementById('bienvenido-full');
Â  Â  Â  Â  Â  Â  if (!msg) return;
Â  Â  Â  Â  Â  Â  msg.innerHTML = `<span class="bienvenido-text">BIENVENIDO ${nombre}</span>`;
Â  Â  Â  Â  Â  Â  msg.classList.add('show');
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  msg.classList.remove('show');
Â  Â  Â  Â  Â  Â  }, 2500);
Â  Â  Â  Â  }

Â  Â  Â  Â  // *** FUNCIONES QUE INTERACTÃšAN CON EL BACKEND ***

Â  Â  Â  Â  const API_BASE_URL = 'https://proyectoexpokinal.onrender.com';

Â  Â  Â  Â  // Nueva funciÃ³n para eliminar usuario
Â  Â  Â  Â  async function deleteUser(userId) {
Â  Â  Â  Â  Â  Â  if (!confirm('Â¿EstÃ¡s seguro de que quieres eliminar este usuario?')) {
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const token = localStorage.getItem('token');
Â  Â  Â  Â  Â  Â  const currentUserEmail = localStorage.getItem('correo_actual');
Â  Â  Â  Â  Â  Â  const currentUserRole = localStorage.getItem('rol_actual');

Â  Â  Â  Â  Â  Â  if (!token || currentUserEmail !== 'admin@admin.com' || currentUserRole !== 'admin') {
Â  Â  Â  Â  Â  Â  Â  Â  alert('No tienes permisos para eliminar usuarios.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Evitar que el administrador se elimine a sÃ­ mismo
Â  Â  Â  Â  Â  Â  const currentUserObj = JSON.parse(localStorage.getItem('user'));
Â  Â  Â  Â  Â  Â  if (currentUserObj && currentUserObj.id === userId) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('No puedes eliminar tu propia cuenta de administrador.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(`${API_BASE_URL}/users/${userId}`, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'DELETE',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Authorization': `Bearer ${token}`
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  if (response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert('Usuario eliminado con Ã©xito.');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cargarUsuariosDesdeBackend(); // Recargar la tabla despuÃ©s de eliminar
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const errorData = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert('Error al eliminar usuario: ' + (errorData.message || 'Desconocido'));
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error al conectar con el servidor para eliminar usuario:', error);
Â  Â  Â  Â  Â  Â  Â  Â  alert('Error de conexiÃ³n al intentar eliminar usuario.');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }


Â  Â  Â  Â  async function cargarUsuariosDesdeBackend() {
Â  Â  Â  Â  Â  Â  const tbody = document.querySelector('#usuarios-table tbody');
Â  Â  Â  Â  Â  Â  if (!tbody) return;

Â  Â  Â  Â  Â  Â  tbody.innerHTML = '<tr><td colspan="6">Cargando usuarios...</td></tr>'; // Actualizado a 6 columnas
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const token = localStorage.getItem('token');
Â  Â  Â  Â  Â  Â  Â  Â  const userRole = localStorage.getItem('rol_actual');
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  if (!token || userRole !== 'admin') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tbody.innerHTML = '<tr><td colspan="6">Acceso denegado. No tienes permisos de administrador.</td></tr>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(`${API_BASE_URL}/users`, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Authorization': `Bearer ${token}`
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (response.status === 403) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tbody.innerHTML = '<tr><td colspan="6">Acceso denegado. No tienes permisos de administrador.</td></tr>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(`HTTP error! status: ${response.status}`);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  const usuarios = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  tbody.innerHTML = '';

Â  Â  Â  Â  Â  Â  Â  Â  if (usuarios.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tbody.innerHTML = '<tr><td colspan="6">No hay usuarios registrados.</td></tr>';
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  usuarios.forEach(usuario => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const tr = document.createElement('tr');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const currentUserObj = JSON.parse(localStorage.getItem('user'));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isCurrentUserAdmin = (currentUserObj && currentUserObj.id === usuario.id && usuario.rol === 'admin');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tr.innerHTML = `<td>${usuario.id}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${usuario.correo}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${usuario.nombre || 'N/A'}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${usuario.apellido || 'N/A'}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${usuario.rol || 'N/A'}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${!isCurrentUserAdmin ? `<button class="delete-user-btn" onclick="deleteUser(${usuario.id})">Eliminar</button>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tbody.appendChild(tr);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error al cargar usuarios desde el backend:', error);
Â  Â  Â  Â  Â  Â  Â  Â  tbody.innerHTML = '<tr><td colspan="6">Error al cargar usuarios. Intenta de nuevo mÃ¡s tarde.</td></tr>';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateUI() {
Â  Â  Â  Â  Â  Â  const accesoSection = document.getElementById('acceso-section');
Â  Â  Â  Â  Â  Â  const mainSection = document.getElementById('main-section');
Â  Â  Â  Â  Â  Â  const sidebarSection = document.getElementById('sidebar-section');
Â  Â  Â  Â  Â  Â  const userAvatarContainer = document.getElementById('user-avatar-container');
Â  Â  Â  Â  Â  Â  const usuariosSection = document.getElementById('usuarios-section');
Â  Â  Â  Â  Â  Â  const adminDashboardLink = document.getElementById('admin-dashboard-link');

Â  Â  Â  Â  Â  Â  if (!accesoSection || !mainSection || !sidebarSection || !userAvatarContainer || !usuariosSection || !adminDashboardLink) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Algunos elementos UI no se encontraron. La interfaz no se actualizarÃ¡ completamente.");
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const isUserLoggedIn = localStorage.getItem('logueado') === 'si';
Â  Â  Â  Â  Â  Â  const currentUserEmail = localStorage.getItem('correo_actual');
Â  Â  Â  Â  Â  Â  const currentUserRole = localStorage.getItem('rol_actual');

Â  Â  Â  Â  Â  Â  if (isUserLoggedIn) {
Â  Â  Â  Â  Â  Â  Â  Â  accesoSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  sidebarSection.style.display = '';
Â  Â  Â  Â  Â  Â  Â  Â  showUserAvatar();

Â  Â  Â  Â  Â  Â  Â  Â  mainSection.style.display = '';
Â  Â  Â  Â  Â  Â  Â  Â  usuariosSection.style.display = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  if (currentUserEmail === 'admin@admin.com' && currentUserRole === 'admin') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adminDashboardLink.style.display = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adminDashboardLink.onclick = async function(e) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mainSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  usuariosSection.style.display = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await cargarUsuariosDesdeBackend();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  toggleMenu();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adminDashboardLink.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  accesoSection.style.display = '';
Â  Â  Â  Â  Â  Â  Â  Â  mainSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  sidebarSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  userAvatarContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  usuariosSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  adminDashboardLink.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  closePerfilModal();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }


Â  Â  Â  Â  // --- FunciÃ³n para cerrar sesiÃ³n ---
Â  Â  Â  Â  function logout() {
Â  Â  Â  Â  Â  Â  localStorage.clear();
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const menu = document.getElementById('menu-list');
Â  Â  Â  Â  Â  Â  if (menu) menu.classList.remove('show');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  updateUI();
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Manejo de Login/Registro ---
Â  Â  Â  Â  document.getElementById('show-register').addEventListener('click', function() {
Â  Â  Â  Â  Â  Â  document.getElementById('login-form').style.display = 'none';
Â  Â  Â  Â  Â  Â  document.getElementById('register-form').style.display = 'block';
Â  Â  Â  Â  Â  Â  document.getElementById('login-error').textContent = '';
Â  Â  Â  Â  });

Â  Â  Â  Â  document.getElementById('show-login').addEventListener('click', function() {
Â  Â  Â  Â  Â  Â  document.getElementById('login-form').style.display = 'block';
Â  Â  Â  Â  Â  Â  document.getElementById('register-form').style.display = 'none';
Â  Â  Â  Â  Â  Â  document.getElementById('register-error').textContent = '';
Â  Â  Â  Â  Â  Â  document.getElementById('register-success').textContent = '';
Â  Â  Â  Â  });

Â  Â  Â  Â  document.getElementById('login-form').addEventListener('submit', async function(e) {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  const email = this.elements.email.value;
Â  Â  Â  Â  Â  Â  const clave = this.elements.clave.value;
Â  Â  Â  Â  Â  Â  const errorDiv = document.getElementById('login-error');
Â  Â  Â  Â  Â  Â  errorDiv.textContent = '';

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(`${API_BASE_URL}/login`, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ email, clave })
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  if (response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('token', data.token);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('logueado', 'si');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('correo_actual', data.user.correo);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('nombre_actual', data.user.nombre);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('apellido_actual', data.user.apellido);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('rol_actual', data.user.rol);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('user', JSON.stringify(data.user)); // Guarda todo el objeto user

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mostrarBienvenida(data.user.nombre);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateUI();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 2500); // Espera a que termine la animaciÃ³n
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorDiv.textContent = data.message || 'Error en el login';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error de conexiÃ³n:', error);
Â  Â  Â  Â  Â  Â  Â  Â  errorDiv.textContent = 'Error de conexiÃ³n con el servidor.';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  document.getElementById('register-form').addEventListener('submit', async function(e) {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  const nombre = this.elements.nombre.value;
Â  Â  Â  Â  Â  Â  const apellido = this.elements.apellido.value;
Â  Â  Â  Â  Â  Â  const email = this.elements.email.value;
Â  Â  Â  Â  Â  Â  const clave = this.elements.clave.value;
Â  Â  Â  Â  Â  Â  const clave2 = this.elements.clave2.value;
Â  Â  Â  Â  Â  Â  const errorDiv = document.getElementById('register-error');
Â  Â  Â  Â  Â  Â  const successDiv = document.getElementById('register-success');
Â  Â  Â  Â  Â  Â  errorDiv.textContent = '';
Â  Â  Â  Â  Â  Â  successDiv.textContent = '';

Â  Â  Â  Â  Â  Â  if (clave !== clave2) {
Â  Â  Â  Â  Â  Â  Â  Â  errorDiv.textContent = 'Las contraseÃ±as no coinciden.';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(`${API_BASE_URL}/register`, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ nombre, apellido, email, clave })
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  if (response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  successDiv.textContent = 'Â¡Registro exitoso! Ahora puedes iniciar sesiÃ³n.';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.reset();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('show-login').click();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 2000);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorDiv.textContent = data.message || 'Error en el registro';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error de conexiÃ³n:', error);
Â  Â  Â  Â  Â  Â  Â  Â  errorDiv.textContent = 'Error de conexiÃ³n con el servidor.';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // Login de invitado
Â  Â  Â  Â  document.getElementById('guest-login-btn').addEventListener('click', guestLogin);
Â  Â  Â  Â  document.getElementById('guest-login-btn-register').addEventListener('click', guestLogin);

Â  Â  Â  Â  function guestLogin() {
Â  Â  Â  Â  Â  Â  localStorage.setItem('logueado', 'si');
Â  Â  Â  Â  Â  Â  localStorage.setItem('correo_actual', 'invitado@temp.com');
Â  Â  Â  Â  Â  Â  localStorage.setItem('nombre_actual', 'Invitado');
Â  Â  Â  Â  Â  Â  localStorage.setItem('apellido_actual', '');
Â  Â  Â  Â  Â  Â  localStorage.setItem('rol_actual', 'estudiante');
Â  Â  Â  Â  Â  Â  // localStorage.setItem('foto_actual', ''); // Ya no se necesita
Â  Â  Â  Â  Â  Â  localStorage.setItem('token', 'guest_token_placeholder');
Â  Â  Â  Â  Â  Â  localStorage.setItem('user', JSON.stringify({
Â  Â  Â  Â  Â  Â  Â  Â  id: 'guest',
Â  Â  Â  Â  Â  Â  Â  Â  correo: 'invitado@temp.com',
Â  Â  Â  Â  Â  Â  Â  Â  nombre: 'Invitado',
Â  Â  Â  Â  Â  Â  Â  Â  apellido: '',
Â  Â  Â  Â  Â  Â  Â  Â  rol: 'estudiante'
Â  Â  Â  Â  Â  Â  Â  Â  // foto: '' // Ya no se necesita
Â  Â  Â  Â  Â  Â  }));
Â  Â  Â  Â  Â  Â  mostrarBienvenida('Invitado');
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  updateUI();
Â  Â  Â  Â  Â  Â  }, 2500);
Â  Â  Â  Â  }

Â  Â  Â  Â  // Eliminado: Manejo de la subida de foto de perfil

Â  Â  Â  Â  // Carga inicial y listeners
Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', updateUI);
Â  Â  Â  Â  window.addEventListener('resize', showUserAvatar);
Â  Â  Â  Â  
Â  Â  Â  Â  // Cierra el modal de perfil si se hace clic fuera de Ã©l
Â  Â  Â  Â  document.getElementById('perfil-modal-bg').addEventListener('click', function(e) {
Â  Â  Â  Â  Â  Â  if (e.target === this) {
Â  Â  Â  Â  Â  Â  Â  Â  closePerfilModal();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  </script>
</body>
</html>